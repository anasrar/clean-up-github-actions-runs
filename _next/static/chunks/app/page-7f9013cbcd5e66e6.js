(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6537:function(e,r,t){Promise.resolve().then(t.bind(t,448))},448:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return P}});var n=t(8972),s=t(410),o=t(4366),i=t(7370),a=t(5588),l=t(8274),c=t(6028),d=t(1982),u=t(1835),f=t(9754),m=t(8359);function x(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,m.m)((0,f.W)(r))}let p=(0,u.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),h=d.forwardRef((e,r)=>{let{className:t,variant:s,size:o,...i}=e;return(0,n.jsx)("button",{className:x(p({variant:s,size:o,className:t})),ref:r,...i})});h.displayName="Button";var g=t(438),b=t(2555);let j=(0,u.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),v=d.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(b.f,{ref:r,className:x(j(),t),...s})});v.displayName=b.f.displayName;let y=a.RV,w=d.createContext({}),N=e=>{let{...r}=e;return(0,n.jsx)(w.Provider,{value:{name:r.name},children:(0,n.jsx)(a.Qr,{...r})})},k=()=>{let e=d.useContext(w),r=d.useContext(_),{getFieldState:t,formState:n}=(0,a.Gc)(),s=t(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=r;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...s}},_=d.createContext({}),R=d.forwardRef((e,r)=>{let{className:t,...s}=e,o=d.useId();return(0,n.jsx)(_.Provider,{value:{id:o},children:(0,n.jsx)("div",{ref:r,className:x("space-y-2",t),...s})})});R.displayName="FormItem";let F=d.forwardRef((e,r)=>{let{className:t,...s}=e,{error:o,formItemId:i}=k();return(0,n.jsx)(v,{ref:r,className:x(o&&"text-destructive",t),htmlFor:i,...s})});F.displayName="FormLabel";let C=d.forwardRef((e,r)=>{let{...t}=e,{error:s,formItemId:o,formDescriptionId:i,formMessageId:a}=k();return(0,n.jsx)(g.g7,{ref:r,id:o,"aria-describedby":s?"".concat(i," ").concat(a):"".concat(i),"aria-invalid":!!s,...t})});C.displayName="FormControl";let E=d.forwardRef((e,r)=>{let{className:t,...s}=e,{formDescriptionId:o}=k();return(0,n.jsx)("p",{ref:r,id:o,className:x("text-sm text-muted-foreground",t),...s})});E.displayName="FormDescription";let I=d.forwardRef((e,r)=>{let{className:t,children:s,...o}=e,{error:i,formMessageId:a}=k(),l=i?String(null==i?void 0:i.message):s;return l?(0,n.jsx)("p",{ref:r,id:a,className:x("text-sm font-medium text-destructive",t),...o,children:l}):null});I.displayName="FormMessage";let Z=d.forwardRef((e,r)=>{let{className:t,type:s,...o}=e;return(0,n.jsx)("input",{type:s,className:x("flex h-10 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...o})});Z.displayName="Input";let z=c.Ry({username:c.Z_().min(1),repository:c.Z_().min(1),token:c.Z_().min(5)});async function A(e,r){let{arg:t}=r,n=await fetch("https://api.github.com/repos/".concat(t.username,"/").concat(t.repository,"/actions/runs?per_page=100"),{method:"GET",headers:{Authorization:"token ".concat(t.token)}}).then(e=>e.json());for(let e of n.workflow_runs)await fetch("https://api.github.com/repos/".concat(t.username,"/").concat(t.repository,"/actions/runs/").concat(e.id),{method:"DELETE",headers:{Authorization:"token ".concat(t.token)}});return n.workflow_runs.length}function P(){let{trigger:e,isMutating:r}=(0,l.Z)("/api/runs",A),t=(0,a.cI)({resolver:(0,s.F)(z)});async function c(r){e(r)}return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("section",{className:"flex max-w-lg flex-col gap-8 px-6 py-8",children:(0,n.jsx)(y,{...t,children:(0,n.jsxs)("form",{onSubmit:t.handleSubmit(c),className:"flex flex-col gap-6",children:[(0,n.jsx)("div",{className:"flex flex-row justify-center",children:(0,n.jsxs)("h1",{className:"text-center text-2xl font-extrabold leading-tight tracking-tighter",children:["Clean Up ",(0,n.jsx)("br",{})," GitHub Actions Runs"]})}),(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,n.jsx)(N,{control:t.control,name:"username",render:e=>{let{field:r}=e;return(0,n.jsxs)(R,{children:[(0,n.jsx)(F,{children:"Username"}),(0,n.jsx)(C,{children:(0,n.jsx)(Z,{placeholder:"username",...r})})]})}}),(0,n.jsx)(N,{control:t.control,name:"repository",render:e=>{let{field:r}=e;return(0,n.jsxs)(R,{children:[(0,n.jsx)(F,{children:"Repository"}),(0,n.jsx)(C,{children:(0,n.jsx)(Z,{placeholder:"repository",...r})})]})}})]}),(0,n.jsx)(N,{control:t.control,name:"token",render:e=>{let{field:r}=e;return(0,n.jsxs)(R,{children:[(0,n.jsx)(F,{children:"Token"}),(0,n.jsx)(C,{children:(0,n.jsx)(Z,{type:"password",placeholder:"ghp_*** or github_pat_***",...r})}),(0,n.jsx)(E,{children:"Personal access tokens with scope repo and workflow for classic token or actions read and write for fine-grained token."})]})}})]}),(0,n.jsx)("div",{className:"flex flex-row justify-center",children:(0,n.jsxs)(h,{size:"sm",type:"submit",disabled:r,children:[r?(0,n.jsx)(o.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,n.jsx)(i.Z,{className:"mr-2 h-4 w-4"})," ","Remove Runs"]})})]})})})})}}},function(e){e.O(0,[89,157,900,744],function(){return e(e.s=6537)}),_N_E=e.O()}]);